'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj},_Utils=require('../Utils/Utils'),_Utils2=_interopRequireDefault(_Utils),_Defaults=require('../Defaults');Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var Importer={homogenizeColumn:function homogenizeColumn(){var column=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},rows=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};if(!column||!column.key)throw new Error('Cannot homogenize a column without a `.key`');if(!column.type&&rows.length){var isHtmlColumn=rows.some(function(row){return _Utils2.default.isHtml(row[column.key])}),isNumberColumn=rows.every(function(row){return!row[column.key]||!row[column.key].length||_Utils2.default.isNumeric(column.key)});isHtmlColumn?column.type='html':isNumberColumn&&(column.type='number')}column.primary&&(column.hideable=!1);var optionalDefaults=options&&'columnDefaults'in options?options.columnDefaults:{};return Object.assign({},_Defaults.ColumnDefaults,optionalDefaults,column)},columnsFromRows:function columnsFromRows(){var rows=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],options=arguments[1];if(!Array.isArray(rows))return[];var keys=_Utils2.default.keysInList(rows,['__id']).map(function(key){return{key:key}});return Importer.processColumns(keys,rows,options)},processColumns:function processColumns(columns,rows,options){return Array.isArray(columns)?columns.map(function(column){return Importer.homogenizeColumn(column,rows,options)}).map(function(col,__index){return Object.assign(col,{__index:__index})}).filter(function(col){return!col.disabled}):null},columnsFromMap:function columnsFromMap(){var map=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},rows=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[],options=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},columns=[];for(var key in map){var column={key:key},value=map[key];switch('undefined'==typeof value?'undefined':_typeof(value)){case'string':column.name=value;case'object':column=Object.assign({},column,value);}columns.push(column)}return Importer.processColumns(columns,rows,options)},importColumns:function importColumns(columns,rows,options){return columns&&'object'===('undefined'==typeof columns?'undefined':_typeof(columns))&&(!Array.isArray(columns)||columns.length)?Array.isArray(columns)?Importer.processColumns(columns,rows,options):Importer.columnsFromMap(columns,rows,options):Array.isArray(rows)&&rows.length?Importer.columnsFromRows(rows,options):[]},importRows:function importRows(rows){return rows&&Array.isArray(rows)&&!rows.some(function(row){return'object'!==('undefined'==typeof row?'undefined':_typeof(row))})?(rows=rows.map(function(row,__index){var __id=_Utils2.default.uid();return Object.assign({},row,{__id:__id,__index:__index})}),rows):[]},importOptions:function importOptions(){var options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},result=Object.assign({},_Defaults.OptionsDefaults,options);return result},importActions:function importActions(actions){var options=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return actions&&Array.isArray(actions)&&!actions.some(function(action){return'object'!==('undefined'==typeof action?'undefined':_typeof(action))})?(actions=options.useDefaultActions?[].concat(_toConsumableArray(actions),_toConsumableArray(_Defaults.ActionDefaults)):actions,actions=actions.map(function(action){var __id=action.__id?action.__id:_Utils2.default.uid();return Object.assign({},action,{__id:__id})}),actions):[]}};exports.default=Importer;