'use strict';var _typeof='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&'function'==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj},_react=require('react'),_react2=_interopRequireDefault(_react),_Defaults=require('../Defaults'),_Defaults2=_interopRequireDefault(_Defaults);Object.defineProperty(exports,'__esModule',{value:!0});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Utils={stringValue:function stringValue(value){switch('undefined'==typeof value?'undefined':_typeof(value)){case'string':return Utils.isHtml(value)?Utils.htmlStringValue(value):value;case'number':case'boolean':return value.toString();case'object':return Array.isArray(value)?value.map(Utils.stringValue).join(', '):null===value?'':JSON.stringify(value);case'undefined':default:return'';}},getRealOffset:function getRealOffset(el){var top=0,left=0;do top+=el.offsetTop||0,left+=el.offsetLeft||0,el=el.offsetParent;while(el);return{top:top,left:left}},htmlStringValue:function htmlStringValue(html){var tmp=document.createElement('DIV');return tmp.innerHTML=html,tmp.textContent||tmp.innerText||''},wordCount:function wordCount(text){return'string'==typeof text?text.trim().split(' ').filter(function(x){return x.length}).length:void 0},reverseText:function reverseText(text){return'string'==typeof text&&text.length?text.split('').reverse().join(''):text},trimInitialPunctuation:function trimInitialPunctuation(text){if('string'!=typeof text||!text.length)return text;for(;0!==text.search(/[a-zA-Z0-9]/);)text=text.substring(1);return text},trimPunctuation:function trimPunctuation(text){return'string'==typeof text&&text.length?(text=Utils.trimInitialPunctuation(text),text=Utils.reverseText(text),text=Utils.trimInitialPunctuation(text),text=Utils.reverseText(text),text):text},truncate:function truncate(text,cutoff){if('string'!=typeof text||'number'!=typeof cutoff)return text;var count=Utils.wordCount(text);if(count<cutoff)return text;var words=text.trim().split(' ').filter(function(x){return x.length}),threshold=Math.ceil(0.66*cutoff),short=words.slice(0,threshold).join(' ');return Utils.trimPunctuation(short)+'...'},objectContainsQuery:function objectContainsQuery(obj,query){var searchable=Utils.stringValue(obj).toLowerCase();return Utils.stringContainsQuery(searchable,query)},stringContainsQuery:function stringContainsQuery(str,query){var queryParts=query.toLowerCase().split(' ');return queryParts.every(function(part){return 0<=str.indexOf(part)})},numberSort:function numberSort(items,sortByKey,ascending){var result=items.sort(function(a,b){var A=a[sortByKey]?parseFloat(a[sortByKey]):0,B=b[sortByKey]?parseFloat(b[sortByKey]):0;return A===B?0:A<B?1:-1});return ascending?result.reverse():result},sortFactory:function sortFactory(accessor){return accessor='function'==typeof accessor?accessor:function(value){return value},function(a,b){var A=accessor(a),B=accessor(b);return A===B?0:A<B?1:-1}},textSort:function textSort(items,sortByKey){var ascending=2<arguments.length&&arguments[2]!==void 0?arguments[2]:!0,result=items.sort(function(a,b){var A='string'==typeof a[sortByKey]?a[sortByKey].trim():Utils.stringValue(a[sortByKey]),B='string'==typeof b[sortByKey]?b[sortByKey].trim():Utils.stringValue(b[sortByKey]);return A===B?0:A<B?1:-1});return ascending?result.reverse():result},ucFirst:function ucFirst(text){return'string'==typeof text&&text.length?text[0].toUpperCase()+text.slice(1):text},isHtml:function isHtml(text){var strict=1<arguments.length&&arguments[1]!==void 0&&arguments[1];if('string'!=typeof text)return!1;if(strict&&('<'!==text[0]||'>'!==text[text.length-1]))return!1;var parser=new DOMParser().parseFromString(text,'text/html');return Array.from(parser.body.childNodes).some(function(node){return 1===node.nodeType})},isNumeric:function isNumeric(value){return!Array.isArray(value)&&0<=value-parseFloat(value)+1},randomize:function randomize(){var low=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0,high=1<arguments.length&&arguments[1]!==void 0?arguments[1]:99;return Math.floor(Math.random()*(high-low+1)+low)},uid:function uid(){for(var len=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8,output='';output.length<len;){var index=Utils.randomize(0,35);output+=10<=index?String.fromCharCode(87+index):index.toString()}return output},keysInList:function keysInList(list){var blacklist=1<arguments.length&&arguments[1]!==void 0?arguments[1]:[];return!Array.isArray(list)||list.some(function(item){return'object'!==('undefined'==typeof item?'undefined':_typeof(item))})?list:list.reduce(function(keys,currentValue){return Object.keys(currentValue).forEach(function(key){return keys.includes(key)||blacklist.includes(key)||keys.push(key)}),keys},[])},createCsv:function createCsv(rows,columns){columns||(columns=Utils.keysInList(rows).map(function(key){})),columns=columns.filter(function(column){return!column.hidden&&!column.disabled});var outputLines=[],keys=columns.map(function(_ref){var key=_ref.key;return key}),names=columns.map(function(column){return column.name?column.name:column.key});return outputLines.push(names.join(',')),rows.forEach(function(row){var values=keys.map(function(key){return Utils.stringValue(row[key]).replace(',',',').replace('\n','')});outputLines.push(values.join(','))}),outputLines.join('\n')}};exports.default=Utils;