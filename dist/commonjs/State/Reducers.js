'use strict';Object.defineProperty(exports,'__esModule',{value:!0}),exports.default=ReducerFactory;var _InitialState=require('../State/InitialState'),_InitialState2=_interopRequireDefault(_InitialState);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function ReducerFactory(){var base=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},startingState=Object.assign({},_InitialState2.default,base);return function(){var state=0<arguments.length&&arguments[0]!==void 0?arguments[0]:startingState,action=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};switch(action.type){case'SET_PAGINATION_ANCHOR':{var anchorIndex=action.anchorIndex,uiState=state.uiState,_uiState=uiState,paginationState=_uiState.paginationState;return paginationState=Object.assign({},paginationState,{anchorIndex:anchorIndex}),uiState=Object.assign({},uiState,{paginationState:paginationState}),Object.assign({},state,{uiState:uiState})}case'SET_PAGINATED_ITEMS_PER_PAGE':{var itemsPerPage=action.itemsPerPage,_uiState2=state.uiState,_uiState3=_uiState2,_paginationState=_uiState3.paginationState;return _paginationState=Object.assign({},_paginationState,{itemsPerPage:itemsPerPage}),_uiState2=Object.assign({},_uiState2,{paginationState:_paginationState}),Object.assign({},state,{uiState:_uiState2})}case'UPDATE_OPTIONS':{var options=action.options;return Object.assign({},state,{options:options})}case'UPDATE_COLUMNS':{var columns=action.columns;return Object.assign({},state,{columns:columns})}case'UPDATE_ROWS':{var rows=action.rows;return Object.assign({},state,{rows:rows})}case'UPDATE_ACTIONS':{var actions=action.actions;return Object.assign({},state,{actions:actions})}case'SET_COLUMN_WIDTH':{var column=action.column,width=action.width,_columns=state.columns,index=_columns.indexOf(column);if(0>index)return state;return _columns[index]=Object.assign({},_columns[index],{width:width}),Object.assign({},state,{columns:_columns})}case'TOGGLE_COLUMN_FILTER':{var _column=action.column,_columns2=state.columns;if(!_column.filterable)return state;var _index=_columns2.findIndex(function(col){return col.key===_column.key});if(0>_index)return state;var filterState=_column.filterState;return filterState.enabled=!filterState.enabled,_columns2[_index]=Object.assign({},_columns2[_index],{filterState:filterState}),Object.assign({},state,{columns:_columns2})}case'TOGGLE_COLUMN_FILTER_VALUE':{var _column2=action.column,value=action.value,_columns3=state.columns;if(!_column2.filterable)return state;var _index2=_columns3.findIndex(function(col){return col.key===_column2.key});if(console.log('TCFV: using index',_index2),0>_index2)return state;var _filterState=Object.assign({},_column2.filterState),blacklist=[].concat(_toConsumableArray(_filterState.blacklist));return blacklist=blacklist.includes(value)?blacklist.filter(function(item){return item!==value}):[].concat(_toConsumableArray(blacklist),[value]),_filterState=Object.assign({},_filterState,{blacklist:blacklist}),_columns3[_index2]=Object.assign({},_column2,{filterState:_filterState}),Object.assign({},state,{columns:_columns3})}case'TOGGLE_COLUMN_FILTER_VISIBILITY':{var _column3=action.column,_columns4=state.columns;if(!_column3.filterable)return state;var _index3=_columns4.findIndex(function(col){return col.key===_column3.key});if(console.log('TCFVis: using index',_index3),0>_index3)return state;var _filterState2=Object.assign({},_column3.filterState);return _filterState2.visible=!_filterState2.visible,_columns4[_index3]=Object.assign({},_columns4[_index3],{filterState:_filterState2}),Object.assign({},state,{columns:_columns4})}case'SET_COLUMN_BLACKLIST':{var _column4=action.column,_blacklist=action.blacklist,_columns5=state.columns;if(!_column4.filterable)return state;var _index4=_columns5.findIndex(function(col){return col.key===_column4.key});if(0>_index4)return state;var _filterState3=_column4.filterState;return _filterState3=Object.assign({},_filterState3,{blacklist:_blacklist}),_columns5[_index4]=Object.assign({},_columns5[_index4],{filterState:_filterState3}),Object.assign({},state,{columns:_columns5})}case'DISABLE_ALL_COLUMN_FILTERS':{var _columns6=state.columns;return _columns6=_columns6.map(function(column){var _column5=column,filterable=_column5.filterable,filterState=_column5.filterState;return filterable?(filterState=Object.assign({},filterState,{enabled:!1}),column=Object.assign({},column,{filterState:filterState}),column):column}),Object.assign({},state,{columns:_columns6})}case'SET_EMPTINESS_CULPRIT':{var emptinessCulprit=action.emptinessCulprit,_uiState4=state.uiState;return _uiState4=Object.assign({},_uiState4,{emptinessCulprit:emptinessCulprit}),Object.assign({},state,{uiState:_uiState4})}case'SORT_BY_COLUMN':{var byColumn=action.column,sort=Object.assign({},state.uiState.sort,{byColumn:byColumn,ascending:!0}),_uiState5=Object.assign({},state.uiState,{sort:sort});return Object.assign({},state,{uiState:_uiState5})}case'TOGGLE_SORT_ORDER':{var ascending=state.uiState.sort.ascending,_sort=Object.assign({},state.uiState.sort,{ascending:!ascending}),_uiState6=Object.assign({},state.uiState,{sort:_sort});return Object.assign({},state,{uiState:_uiState6})}case'TOGGLE_COLUMN_EDITOR':{var _uiState7=state.uiState,columnEditorOpen=!_uiState7.columnEditorOpen;return _uiState7=Object.assign({},_uiState7,{columnEditorOpen:columnEditorOpen}),Object.assign({},state,{uiState:_uiState7})}case'OPEN_COLUMN_EDITOR':{var _uiState8=state.uiState;return _uiState8=Object.assign({},_uiState8,{columnEditorOpen:!0}),Object.assign({},state,{uiState:_uiState8})}case'CLOSE_COLUMN_EDITOR':{var _uiState9=state.uiState;return _uiState9=Object.assign({},_uiState9,{columnEditorOpen:!1}),Object.assign({},state,{uiState:_uiState9})}case'HIDE_COLUMN':{var _column6=action.column,_columns7=state.columns;if(!_column6.hideable||_column6.hidden)return state;var _index5=_columns7.indexOf(_column6);return _columns7[_index5]=Object.assign({},_columns7[_index5],{hidden:!0}),Object.assign({},state,{columns:_columns7})}case'SHOW_COLUMN':{var _column7=action.column,_columns8=state.columns;if(!_column7.hidden)return state;var _index6=_columns8.indexOf(_column7);return _columns8[_index6]=Object.assign({},_columns8[_index6],{hidden:!1}),Object.assign({},state,{columns:_columns8})}case'SEARCH_BY_QUERY':{var searchQuery=action.searchQuery,_uiState10=state.uiState;searchQuery&&searchQuery.length||(searchQuery=null);var _uiState11=_uiState10,_paginationState2=_uiState11.paginationState;return _paginationState2=Object.assign({},_paginationState2,{anchorIndex:1}),_uiState10=Object.assign({},_uiState10,{searchQuery:searchQuery},{paginationState:_paginationState2}),Object.assign({},state,{uiState:_uiState10})}case'SELECT_ROW_BY_ID':{var id=action.id,_uiState12=state.uiState,_uiState13=_uiState12,selection=_uiState13.selection;if(selection.includes(id))return state;return selection.push(id),_uiState12=Object.assign({},_uiState12,{selection:selection}),Object.assign({},state,{uiState:_uiState12})}case'SELECT_ROWS_BY_IDS':{var ids=action.ids,_uiState14=state.uiState,_uiState15=_uiState14,_selection=_uiState15.selection,selectable=ids.filter(function(id){return!_selection.includes(id)});return _selection=[].concat(_toConsumableArray(_selection),_toConsumableArray(selectable)),_uiState14=Object.assign({},_uiState14,{selection:_selection}),Object.assign({},state,{uiState:_uiState14})}case'DESELECT_ROWS_BY_IDS':{var _ids=action.ids,_uiState16=state.uiState,_uiState17=_uiState16,_selection2=_uiState17.selection;return _selection2=_selection2.filter(function(id){return!_ids.includes(id)}),_uiState16=Object.assign({},_uiState16,{selection:_selection2}),Object.assign({},state,{uiState:_uiState16})}case'DESELECT_ROW_BY_ID':{var _id=action.id,_uiState18=state.uiState,_uiState19=_uiState18,_selection3=_uiState19.selection,_index7=_selection3.indexOf(_id);if(0>_index7)return state;return _selection3.splice(_index7,1),_uiState18=Object.assign({},_uiState18,{selection:_selection3}),Object.assign({},state,{uiState:_uiState18})}case'TOGGLE_ROW_SELECTION_BY_ID':{var _id2=action.id,_uiState20=state.uiState,_uiState21=_uiState20,_selection4=_uiState21.selection,_index8=_selection4.indexOf(_id2);return 0>_index8?_selection4.push(_id2):_selection4.splice(_index8,1),_uiState20=Object.assign({},_uiState20,{selection:_selection4}),Object.assign({},state,{uiState:_uiState20})}case'SELECT_ALL_ROWS':{var _uiState22=state.uiState,_rows=state.rows,_uiState23=_uiState22,_selection5=_uiState23.selection;return _selection5=_rows.map(function(row){return row.__id}),_uiState22=Object.assign({},_uiState22,{selection:_selection5}),Object.assign({},state,{uiState:_uiState22})}case'CLEAR_ROW_SELECTION':{var _uiState24=state.uiState;return _uiState24=Object.assign({},_uiState24,{selection:[]}),Object.assign({},state,{uiState:_uiState24})}case'RESET_UI_STATE':{var _uiState25=Object.assign({},startingState.uiState);return Object.assign({},state,{uiState:_uiState25})}default:return state;}}}